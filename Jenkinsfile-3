pipeline {

  agent any
  stages {

    stage("test") {
      steps {
        script {
          echo "Testing the application..."
          echo "Executing pipeline for branch ${BRANCH_NAME}"
        }
      }
    }
    
    stage("build") {
      // conditional statement - only build if its master branch
      when {
        expression {
          BRANCH_NAME == "master"
        }
      }
      steps {
        script {
          echo "Building the application..."
        }
      }
    }

    stage("deploy") {
      // conditional statement - only deploy if its master branch
      when {
        expression {
          BRANCH_NAME == "master"
        }
      }
      steps {
        script {
          echo "Deploying the application..."
        }
      }
    }
  }
}